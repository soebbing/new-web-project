#!/bin/bash
PROJECT="your_project"
CSS_DIR="../src/main/webapp/css"
JS_DIR="../src/main/webapp/js"

echo -n "Compressing CSS..."
cat $CSS_DIR/libs/button.css >> ./styles-tmp.css
cat $CSS_DIR/libs/custombuttons.css >> ./styles-tmp.css
cat $CSS_DIR/libs/flatbutton.css >> ./styles-tmp.css
cat $CSS_DIR/libs/common.css >> ./styles-tmp.css
cat $CSS_DIR/libs/screen.css >> ./styles-tmp.css
java -jar yuicompressor-2.4.2.jar --type css ./styles-tmp.css -o $CSS_DIR/$PROJECT.css
echo "done!"

echo -n "Aggregating JS..."
$JS_DIR/libs/closure/closure/bin/calcdeps.py \
-c closure.jar \
-o script \
-i $JS_DIR/libs/mainpanel.js \
--output_file=aggregated-tmp.js \
-p js/ \
-p $JS_DIR/libs/closure/closure/ #> /dev/null 2>&1
echo "done!"

echo -n "Compressing JS..."
java -jar closure.jar \
--js aggregated-tmp.js \
--js_output_file compiled-tmp.js \
--compilation_level ADVANCED_OPTIMIZATIONS #> /dev/null 2>&1
echo "done!"

tr -d '\r\n' < compiled-tmp.js > $JS_DIR/$PROJECT.js rm *tmp.js
rm *tmp.css
